!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.promisefilter=e()}}(function(){var define,module,exports;return function e(r,n,i){function o(u,l){if(!n[u]){if(!r[u]){var s="function"==typeof require&&require;if(!l&&s)return s(u,!0);if(t)return t(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var f=n[u]={exports:{}};r[u][0].call(f.exports,function(e){var n=r[u][1][e];return o(n?n:e)},f,f.exports,e,r,n,i)}return n[u].exports}for(var t="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(require,module,exports){(function(global){var operative="undefined"!=typeof window?window.operative:"undefined"!=typeof global?global.operative:null,cfUrl="/base/node_modules/crossfilter2/crossfilter.js",opfilter=operative({unpack:function unpackFunction(func,context){var internal,evalStr="";return context&&(evalStr+=context),evalStr+="internal = "+func,eval(evalStr),internal},crossfilters:{},crossfilterIndex:0,dimensions:{},dimensionIndex:0,groupAlls:{},groupAllIndex:0,dimensionGroupAlls:{},dimensionGroupAllIndex:0,dimensionGroups:{},dimensionGroupIndex:0,"new":function(e){e?this.crossfilters[this.crossfilterIndex]=crossfilter(e):this.crossfilters[this.crossfilterIndex]=crossfilter([]);var r=this.crossfilterIndex;this.crossfilterIndex++,this.deferred().fulfill(r)},dimension:function(e,r){var n=this.deferred();this.dimensions[this.dimensionIndex]=this.crossfilters[e].dimension(this.unpack(r));var i=this.dimensionIndex;this.dimensionIndex++,n.fulfill(i)},"dimension.dispose":function(e){this.dimensions[e].dispose(),this.deferred().fulfill()},"dimension.groupAll":function(e){this.dimensionGroupAlls[this.dimensionGroupAllIndex]=this.dimensions[e].groupAll();var r=this.dimensionGroupAllIndex;this.dimensionGroupAllIndex++,this.deferred().fulfill(r)},"dimension.groupAll.value":function(e){var r=this.dimensionGroupAlls[e].value();this.deferred().fulfill(r)},"dimension.groupAll.reduceSum":function(e,r){this.dimensionGroupAlls[e].reduceSum(this.unpack(r)),this.deferred().fulfill()},"dimension.groupAll.reduceCount":function(e){this.dimensionGroupAlls[e].reduceCount(),this.deferred().fulfill()},"dimension.groupAll.reduce":function(e,r,n,i){this.dimensionGroupAlls[e].reduce(this.unpack(r),this.unpack(n),this.unpack(i)),this.deferred().fulfill()},"dimension.groupAll.dispose":function(e){this.dimensionGroupAlls[e].dispose(),this.deferred().fulfill()},"dimension.filterRange":function(e,r){this.dimensions[e].filterRange(r),this.deferred().fulfill()},"dimension.filterExact":function(e,r){this.dimensions[e].filterExact(r),this.deferred().fulfill()},"dimension.filterFunction":function(e,r){this.dimensions[e].filterFunction(this.unpack(r)),this.deferred().fulfill()},"dimension.filterAll":function(e){this.dimensions[e].filterAll(),this.deferred().fulfill()},"dimension.filter":function(e,r){this.dimensions[e].filter(r),this.deferred().fulfill()},"dimension.top":function(e,r){var n=this.dimensions[e].top(r);this.deferred().fulfill(n)},"dimension.bottom":function(e,r){var n=this.dimensions[e].bottom(r);this.deferred().fulfill(n)},"dimension.group":function(e,r){this.dimensionGroups[this.dimensionGroupIndex]=this.dimensions[e].group(this.unpack(r));var n=this.dimensionGroupIndex;this.dimensionGroupIndex++,this.deferred().fulfill(n)},"dimension.group.top":function(e,r){var n=this.dimensionGroups[e].top(r);this.deferred().fulfill(n)},"dimension.group.all":function(e){var r=this.dimensionGroups[e].all();this.deferred().fulfill(r)},"dimension.group.size":function(e){var r=this.dimensionGroups[e].size();this.deferred().fulfill(r)},"dimension.group.reduce":function(e,r,n,i){this.dimensionGroups[e].reduce(this.unpack(r),this.unpack(n),this.unpack(i)),this.deferred().fulfill()},"dimension.group.order":function(e,r){this.dimensionGroups[e].order(this.unpack(r)),this.deferred().fulfill()},"dimension.group.orderNatural":function(e){this.dimensionGroups[e].orderNatural(),this.deferred().fulfill()},"dimension.group.reduceSum":function(e,r){this.dimensionGroups[e].reduceSum(this.unpack(r)),this.deferred().fulfill()},"dimension.group.reduceCount":function(e){this.dimensionGroups[e].reduceCount(),this.deferred().fulfill()},"dimension.group.dispose":function(e){this.dimensionGroups[e].dispose(),this.deferred().fulfill()},groupAll:function(e){var r=this.deferred();this.groupAlls[this.groupAllIndex]=this.crossfilters[e].groupAll();var n=this.groupAllIndex;this.groupAllIndex++,r.fulfill(n)},"groupAll.value":function(e){var r=this.groupAlls[e].value();this.deferred().fulfill(r)},"groupAll.reduceSum":function(e,r){this.groupAlls[e].reduceSum(this.unpack(r)),this.deferred().fulfill()},"groupAll.reduceCount":function(e){this.groupAlls[e].reduceCount(),this.deferred().fulfill()},"groupAll.reduce":function(e,r,n,i){this.groupAlls[e].reduce(this.unpack(r),this.unpack(n),this.unpack(i)),this.deferred().fulfill()},"groupAll.dispose":function(e){this.groupAlls[e].dispose(),this.deferred().fulfill()},add:function(e,r){this.crossfilters[e].add(r),this.deferred().fulfill()},size:function(e){var r=this.crossfilters[e].size();this.deferred().fulfill(r)},all:function(e){var r=this.crossfilters[e].all();this.deferred().fulfill(r)},remove:function(e){this.crossfilters[e].remove(),this.deferred().fulfill()}},[cfUrl]),readSynchronizer=Promise.resolve(),updateSynchronizer=Promise.resolve(),cfFacade=function(e){var r=opfilter["new"](e);return{dimension:function(e){var n=r.then(function(r){return opfilter.dimension(r,e.toString())});return{dispose:function(){return n.then(function(e){return opfilter["dimension.dispose"](e)})},groupAll:function(){var e=n.then(function(e){return opfilter["dimension.groupAll"](e)});return{value:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.value"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,r]),r},reduceSum:function(r){var n=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.reduceSum"](e[0],r.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},reduceCount:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.reduceCount"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),this},reduce:function(r,n,i){var o=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.reduce"](e[0],r.toString(),n.toString(),i.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,o]),this},dispose:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.dispose"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r}}},group:function(e){var r=n.then(function(r){return opfilter["dimension.group"](r,e?e.toString():function(e){return e}.toString())});return{top:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.top"](r[0],e)});return readSynchronizer=Promise.all([readSynchronizer,n]),n},all:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.all"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,e]),e},size:function(){return r.then(function(e){return opfilter["dimension.group.size"](e)})},reduceSum:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.reduceSum"](r[0],e.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},reduceCount:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.reduceCount"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),this},reduce:function(e,n,i){var o=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.reduce"](r[0],e.toString(),n.toString(),i.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,o]),this},order:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.group.order"](r[0],e.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},orderNatural:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.orderNatural"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),this},dispose:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.dispose"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),e}}},filterRange:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filterRange"](r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},filterExact:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filterExact"](r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},filterFunction:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filterFunction"](r[0],e.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},filterAll:function(){var e=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.filterAll"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),e},filter:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.filter"](r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r},top:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.top"](r[0],e)});return readSynchronizer=Promise.all([readSynchronizer,r]),r},bottom:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter["dimension.bottom"](r[0],e)});return readSynchronizer=Promise.all([readSynchronizer,r]),r}}},groupAll:function(){var e=r.then(function(e){return opfilter.groupAll(e)});return{value:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["groupAll.value"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,r]),r},reduceSum:function(r){var n=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){opfilter["groupAll.reduceSum"](e[0],r.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},reduceCount:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){opfilter["groupAll.reduceCount"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),this},reduce:function(r,n,i){var o=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){opfilter["groupAll.reduce"](e[0],r.toString(),n.toString(),i.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,o]),this},dispose:function(){var r=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["groupAll.dispose"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,r]),r}}},remove:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter.remove(e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),this},add:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(r){return opfilter.add(r[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,n]),this},size:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter.size(e[0])});return readSynchronizer=Promise.all([readSynchronizer,e]),e},all:function(){return r.then(function(e){return opfilter.all(e)})}}};module.exports=cfFacade}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});