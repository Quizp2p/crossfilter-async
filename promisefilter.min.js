!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.promisefilter=e()}}(function(){var define,module,exports;return function e(n,r,i){function o(u,l){if(!r[u]){if(!n[u]){var s="function"==typeof require&&require;if(!l&&s)return s(u,!0);if(t)return t(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[u]={exports:{}};n[u][0].call(f.exports,function(e){var r=n[u][1][e];return o(r?r:e)},f,f.exports,e,n,r,i)}return r[u].exports}for(var t="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(require,module,exports){(function(global){var operative="undefined"!=typeof window?window.operative:"undefined"!=typeof global?global.operative:null,cfUrl="/base/node_modules/crossfilter2/crossfilter.js",opfilter=operative({unpack:function unpackFunction(func,context){var internal,evalStr="";return context&&(evalStr+=context),evalStr+="internal = "+func,eval(evalStr),internal},crossfilters:{},crossfilterIndex:0,dimensions:{},dimensionIndex:0,groupAlls:{},groupAllIndex:0,dimensionGroupAlls:{},dimensionGroupAllIndex:0,dimensionGroups:{},dimensionGroupIndex:0,"new":function(e){e?this.crossfilters[this.crossfilterIndex]=crossfilter(e):this.crossfilters[this.crossfilterIndex]=crossfilter([]);var n=this.crossfilterIndex;this.crossfilterIndex++,this.deferred().fulfill(n)},dimension:function(e,n){var r=this.deferred();this.dimensions[this.dimensionIndex]=this.crossfilters[e].dimension(this.unpack(n));var i=this.dimensionIndex;this.dimensionIndex++,r.fulfill(i)},"dimension.dispose":function(e){this.dimensions[e].dispose(),this.deferred().fulfill()},"dimension.groupAll":function(e){this.dimensionGroupAlls[this.dimensionGroupAllIndex]=this.dimensions[e].groupAll();var n=this.dimensionGroupAllIndex;this.dimensionGroupAllIndex++,this.deferred().fulfill(n)},"dimension.groupAll.value":function(e){var n=this.dimensionGroupAlls[e].value();this.deferred().fulfill(n)},"dimension.groupAll.reduceSum":function(e,n){this.dimensionGroupAlls[e].reduceSum(this.unpack(n)),this.deferred().fulfill()},"dimension.groupAll.reduceCount":function(e){this.dimensionGroupAlls[e].reduceCount(),this.deferred().fulfill()},"dimension.groupAll.reduce":function(e,n,r,i){this.dimensionGroupAlls[e].reduce(this.unpack(n),this.unpack(r),this.unpack(i)),this.deferred().fulfill()},"dimension.groupAll.dispose":function(e){this.dimensionGroupAlls[e].dispose(),this.deferred().fulfill()},"dimension.filterRange":function(e,n){this.dimensions[e].filterRange(n),this.deferred().fulfill()},"dimension.filterExact":function(e,n){this.dimensions[e].filterExact(n),this.deferred().fulfill()},"dimension.filterFunction":function(e,n){this.dimensions[e].filterFunction(this.unpack(n)),this.deferred().fulfill()},"dimension.filterAll":function(e){this.dimensions[e].filterAll(),this.deferred().fulfill()},"dimension.filter":function(e,n){this.dimensions[e].filter(n),this.deferred().fulfill()},"dimension.top":function(e,n){var r=this.dimensions[e].top(n);this.deferred().fulfill(r)},"dimension.bottom":function(e,n){var r=this.dimensions[e].bottom(n);this.deferred().fulfill(r)},"dimension.group":function(e,n){this.dimensionGroups[this.dimensionGroupIndex]=this.dimensions[e].group(this.unpack(n));var r=this.dimensionGroupIndex;this.dimensionGroupIndex++,this.deferred().fulfill(r)},"dimension.group.top":function(e,n){var r=this.dimensionGroups[e].top(n);this.deferred().fulfill(r)},"dimension.group.all":function(e){var n=this.dimensionGroups[e].all();this.deferred().fulfill(n)},"dimension.group.size":function(e){var n=this.dimensionGroups[e].size();this.deferred().fulfill(n)},"dimension.group.reduce":function(e,n,r,i){this.dimensionGroups[e].reduce(this.unpack(n),this.unpack(r),this.unpack(i)),this.deferred().fulfill()},"dimension.group.order":function(e,n){this.dimensionGroups[e].order(this.unpack(n)),this.deferred().fulfill()},"dimension.group.orderNatural":function(e){this.dimensionGroups[e].orderNatural(),this.deferred().fulfill()},"dimension.group.reduceSum":function(e,n){this.dimensionGroups[e].reduceSum(this.unpack(n)),this.deferred().fulfill()},"dimension.group.reduceCount":function(e){this.dimensionGroups[e].reduceCount(),this.deferred().fulfill()},"dimension.group.dispose":function(e){this.dimensionGroups[e].dispose(),this.deferred().fulfill()},groupAll:function(e){var n=this.deferred();this.groupAlls[this.groupAllIndex]=this.crossfilters[e].groupAll();var r=this.groupAllIndex;this.groupAllIndex++,n.fulfill(r)},"groupAll.value":function(e){var n=this.groupAlls[e].value();this.deferred().fulfill(n)},"groupAll.reduceSum":function(e,n){this.groupAlls[e].reduceSum(this.unpack(n)),this.deferred().fulfill()},"groupAll.reduceCount":function(e){this.groupAlls[e].reduceCount(),this.deferred().fulfill()},"groupAll.reduce":function(e,n,r,i){this.groupAlls[e].reduce(this.unpack(n),this.unpack(r),this.unpack(i)),this.deferred().fulfill()},"groupAll.dispose":function(e){this.groupAlls[e].dispose(),this.deferred().fulfill()},add:function(e,n){this.crossfilters[e].add(n),this.deferred().fulfill()},size:function(e){var n=this.crossfilters[e].size();this.deferred().fulfill(n)},all:function(e){var n=this.crossfilters[e].all();this.deferred().fulfill(n)},remove:function(e){this.crossfilters[e].remove(),this.deferred().fulfill()}},[cfUrl]),readSynchronizer=Promise.resolve(),updateSynchronizer=Promise.resolve(),cfFacade=function(e){var n=opfilter["new"](e);return{dimension:function(e){var r=n.then(function(n){return opfilter.dimension(n,e.toString())});return{dispose:function(){return r.then(function(e){return opfilter["dimension.dispose"](e)})},groupAll:function(){var e=r.then(function(e){return opfilter["dimension.groupAll"](e)});return{value:function(){var n=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.groupAll.value"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,n]),n},reduceSum:function(n){return e.then(function(e){return opfilter["dimension.groupAll.reduceSum"](e,n.toString())}),this},reduceCount:function(){return e.then(function(e){return opfilter["dimension.groupAll.reduceCount"](e)}),this},reduce:function(n,r,i){return e.then(function(e){return opfilter["dimension.groupAll.reduce"](e,n.toString(),r.toString(),i.toString())}),this},dispose:function(){return e.then(function(e){return opfilter["dimension.groupAll.dispose"](e)})}}},group:function(e){var n=r.then(function(n){return opfilter["dimension.group"](n,e.toString())});return{top:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter["dimension.group.top"](n[0],e)});return readSynchronizer=Promise.all([readSynchronizer,r]),r},all:function(){var e=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.group.all"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,e]),e},size:function(){return n.then(function(e){return opfilter["dimension.group.size"](e)})},reduceSum:function(e){return n.then(function(n){return opfilter["dimension.group.reduceSum"](n,e.toString())}),this},reduceCount:function(){return n.then(function(e){return opfilter["dimension.group.reduceCount"](e)}),this},reduce:function(e,r,i){return n.then(function(n){return opfilter["dimension.group.reduce"](n,e.toString(),r.toString(),i.toString())}),this},order:function(e){return n.then(function(n){return opfilter["dimension.group.order"](n,e.toString())}),this},orderNatural:function(){return n.then(function(e){return opfilter["dimension.group.orderNatural"](e)}),this},dispose:function(){return n.then(function(e){return opfilter["dimension.group.dispose"](e)})}}},filterRange:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter["dimension.filterRange"](n[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,n]),n},filterExact:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter["dimension.filterExact"](n[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,n]),n},filterFunction:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter["dimension.filterFunction"](n[0],e.toString())});return updateSynchronizer=Promise.all([updateSynchronizer,n]),n},filterAll:function(){var e=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["dimension.filterAll"](e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),e},filter:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter["dimension.filter"](n[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,n]),n},top:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter["dimension.top"](n[0],e)});return readSynchronizer=Promise.all([readSynchronizer,n]),n},bottom:function(e){var n=Promise.all([r,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter["dimension.bottom"](n[0],e)});return readSynchronizer=Promise.all([readSynchronizer,n]),n}}},groupAll:function(){var e=n.then(function(e){return opfilter.groupAll(e)});return{value:function(){var n=Promise.all([e,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter["groupAll.value"](e[0])});return readSynchronizer=Promise.all([readSynchronizer,n]),n},reduceSum:function(n){return e.then(function(e){opfilter["groupAll.reduceSum"](e,n.toString())}),this},reduceCount:function(){return e.then(function(e){opfilter["groupAll.reduceCount"](e)}),this},reduce:function(n,r,i){return e.then(function(e){opfilter["groupAll.reduce"](e,n.toString(),r.toString(),i.toString())}),this},dispose:function(){return e.then(function(e){return opfilter["groupAll.dispose"](e)})}}},remove:function(){var e=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter.remove(e[0])});return updateSynchronizer=Promise.all([updateSynchronizer,e]),this},add:function(e){var r=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(n){return opfilter.add(n[0],e)});return updateSynchronizer=Promise.all([updateSynchronizer,r]),this},size:function(){var e=Promise.all([n,readSynchronizer,updateSynchronizer]).then(function(e){return opfilter.size(e[0])});return readSynchronizer=Promise.all([readSynchronizer,e]),e},all:function(){return n.then(function(e){return opfilter.all(e)})}}};module.exports=cfFacade}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});