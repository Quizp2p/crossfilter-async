!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.promisefilter=r()}}(function(){return function r(n,e,t){function i(u,f){if(!e[u]){if(!n[u]){var s="function"==typeof require&&require;if(!f&&s)return s(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var a=e[u]={exports:{}};n[u][0].call(a.exports,function(r){var e=n[u][1][r];return i(e?e:r)},a,a.exports,r,n,e,t)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<t.length;u++)i(t[u]);return i}({1:[function(r,n,e){!function(r){function n(r){return r}function e(r,n){for(var e=0,t=n.length,i=new Array(t);t>e;++e)i[e]=r[n[e]];return i}function t(r){function n(n,e,t,i){for(;i>t;){var o=t+i>>>1;r(n[o])<e?t=o+1:i=o}return t}function e(n,e,t,i){for(;i>t;){var o=t+i>>>1;e<r(n[o])?i=o:t=o+1}return t}return e.right=e,e.left=n,e}function i(r){function n(r,n,e){for(var i=e-n,o=(i>>>1)+1;--o>0;)t(r,o,i,n);return r}function e(r,n,e){for(var i,o=e-n;--o>0;)i=r[n],r[n]=r[n+o],r[n+o]=i,t(r,1,o,n);return r}function t(n,e,t,i){for(var o,u=n[--i+e],f=r(u);(o=e<<1)<=t&&(t>o&&r(n[i+o])>r(n[i+o+1])&&o++,!(f<=r(n[i+o])));)n[i+e]=n[i+o],e=o;n[i+e]=u}return n.sort=e,n}function o(r){function n(n,t,i,o){var u,f,s,l,a=new Array(o=Math.min(i-t,o));for(f=0;o>f;++f)a[f]=n[t++];if(e(a,0,o),i>t){u=r(a[0]);do(s=r(l=n[t])>u)&&(a[0]=l,u=r(e(a,0,o)[0]));while(++t<i)}return a}var e=i(r);return n}function u(r){function n(n,e,t){for(var i=e+1;t>i;++i){for(var o=i,u=n[i],f=r(u);o>e&&r(n[o-1])>f;--o)n[o]=n[o-1];n[o]=u}return n}return n}function f(r){function n(r,n,i){return(S>i-n?t:e)(r,n,i)}function e(e,t,i){var o,u=(i-t)/6|0,f=t+u,s=i-1-u,l=t+i-1>>1,a=l-u,c=l+u,d=e[f],h=r(d),v=e[a],p=r(v),m=e[l],g=r(m),y=e[c],A=r(y),x=e[s],w=r(x);h>p&&(o=d,d=v,v=o,o=h,h=p,p=o),A>w&&(o=y,y=x,x=o,o=A,A=w,w=o),h>g&&(o=d,d=m,m=o,o=h,h=g,g=o),p>g&&(o=v,v=m,m=o,o=p,p=g,g=o),h>A&&(o=d,d=y,y=o,o=h,h=A,A=o),g>A&&(o=m,m=y,y=o,o=g,g=A,A=o),p>w&&(o=v,v=x,x=o,o=p,p=w,w=o),p>g&&(o=v,v=m,m=o,o=p,p=g,g=o),A>w&&(o=y,y=x,x=o,o=A,A=w,w=o);var b=v,z=p,E=y,k=A;e[f]=d,e[a]=e[t],e[l]=m,e[c]=e[i-1],e[s]=x;var I=t+1,O=i-2,G=k>=z&&z>=k;if(G)for(var M=I;O>=M;++M){var S=e[M],U=r(S);if(z>U)M!==I&&(e[M]=e[I],e[I]=S),++I;else if(U>z)for(;;){var q=r(e[O]);{if(!(q>z)){if(z>q){e[M]=e[I],e[I++]=e[O],e[O--]=S;break}e[M]=e[O],e[O--]=S;break}O--}}}else for(var M=I;O>=M;M++){var S=e[M],U=r(S);if(z>U)M!==I&&(e[M]=e[I],e[I]=S),++I;else if(U>k)for(;;){var q=r(e[O]);{if(!(q>k)){z>q?(e[M]=e[I],e[I++]=e[O],e[O--]=S):(e[M]=e[O],e[O--]=S);break}if(O--,M>O)break}}}if(e[t]=e[I-1],e[I-1]=b,e[i-1]=e[O+1],e[O+1]=E,n(e,t,I-1),n(e,O+2,i),G)return e;if(f>I&&O>s){for(var N,q;(N=r(e[I]))<=z&&N>=z;)++I;for(;(q=r(e[O]))<=k&&q>=k;)--O;for(var M=I;O>=M;M++){var S=e[M],U=r(S);if(z>=U&&U>=z)M!==I&&(e[M]=e[I],e[I]=S),I++;else if(k>=U&&U>=k)for(;;){var q=r(e[O]);{if(!(k>=q&&q>=k)){z>q?(e[M]=e[I],e[I++]=e[O],e[O--]=S):(e[M]=e[O],e[O--]=S);break}if(O--,M>O)break}}}}return n(e,I,O+1)}var t=u(r);return n}function s(r){for(var n=new Array(r),e=-1;++e<r;)n[e]=0;return n}function l(r,n){for(var e=r.length;n>e;)r[e++]=0;return r}function a(r,n){if(n>32)throw new Error("invalid array width!");return r}function c(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=U(r)}function d(r,n){return function(e){var t=e.length;return[r.left(e,n,0,t),r.right(e,n,0,t)]}}function h(r,n){var e=n[0],t=n[1];return function(n){var i=n.length;return[r.left(n,e,0,i),r.left(n,t,0,i)]}}function v(r){return[0,r.length]}function p(){return null}function m(){return 0}function g(r){return r+1}function y(r){return r-1}function A(r){return function(n,e){return n+ +r(e)}}function x(r){return function(n,e){return n-r(e)}}function w(){function r(r){var n=G,e=r.length;return e&&(O=O.concat(r),w.lengthen(G+=e),S.forEach(function(t){t(r,n,e)})),I}function t(){for(var r=b(G,G),n=[],e=0,t=0;G>e;++e)w.zero(e)?n.push(e):r[e]=t++;M.forEach(function(r){r(-1,-1,[],n,!0)}),U.forEach(function(n){n(r)});for(var e=0,t=0;G>e;++e)w.zero(e)||(e!==t&&(w.copy(t,e),O[t]=O[e]),++t);O.length=G=t,w.truncate(t)}function u(r){function t(n,t,i){Q=n.map(r),V=Y(z(i),0,i),Q=e(Q,V);var o,u=Z(Q),f=u[0],s=u[1];if(W)for(o=0;i>o;++o)W(Q[o],o)||(w[J][V[o]+t]|=B);else{for(o=0;f>o;++o)w[J][V[o]+t]|=B;for(o=s;i>o;++o)w[J][V[o]+t]|=B}if(!t)return K=Q,P=V,nr=f,void(er=s);var l=K,a=P,c=0,d=0;for(K=new Array(G),P=b(G,G),o=0;t>c&&i>d;++o)l[c]<Q[d]?(K[o]=l[c],P[o]=a[c++]):(K[o]=Q[d],P[o]=V[d++]+t);for(;t>c;++c,++o)K[o]=l[c],P[o]=a[c];for(;i>d;++d,++o)K[o]=Q[d],P[o]=V[d]+t;u=Z(K),nr=u[0],er=u[1]}function u(r,n,e){$.forEach(function(r){r(Q,V,n,e)}),Q=V=null}function s(r){for(var n,e=0,t=0;G>e;++e)w.zero(n=P[e])||(e!==t&&(K[t]=K[e]),P[t]=r[n],++t);for(K.length=t;G>t;)P[t++]=0;var i=Z(K);nr=i[0],er=i[1]}function l(r){var n=r[0],e=r[1];if(W)return W=null,_(function(r,t){return t>=n&&e>t}),nr=n,er=e,X;var t,i,o,u=[],f=[];if(nr>n)for(t=n,i=Math.min(nr,e);i>t;++t)w[J][o=P[t]]^=B,u.push(o);else if(n>nr)for(t=nr,i=Math.min(n,er);i>t;++t)w[J][o=P[t]]^=B,f.push(o);if(e>er)for(t=Math.max(n,er),i=e;i>t;++t)w[J][o=P[t]]^=B,u.push(o);else if(er>e)for(t=Math.max(nr,e),i=er;i>t;++t)w[J][o=P[t]]^=B,f.push(o);return nr=n,er=e,M.forEach(function(r){r(B,J,u,f)}),X}function a(r){return null==r?q():Array.isArray(r)?I(r):"function"==typeof r?N(r):c(r)}function c(r){return l((Z=d(k,r))(K))}function I(r){return l((Z=h(k,r))(K))}function q(){return l((Z=v)(K))}function N(r){return Z=v,_(W=r),nr=0,er=G,X}function _(r){var n,e,t,i=[],o=[];for(n=0;G>n;++n)!(w[J][e=P[n]]&B)^!!(t=r(K[n],n))&&(t?(w[J][e]&=H,i.push(e)):(w[J][e]|=B,o.push(e)));M.forEach(function(r){r(B,J,i,o)})}function j(r){for(var n,e=[],t=er;--t>=nr&&r>0;)w.zero(n=P[t])&&(e.push(O[n]),--r);return e}function D(r){for(var n,e=[],t=nr;er>t&&r>0;)w.zero(n=P[t])&&(e.push(O[n]),--r),t++;return e}function F(r){function e(n,e,t,i){function o(){++W===V&&(y=C(y,Q<<=1),_=C(_,Q),V=E(Q))}var a,c,d,h,v,m,g=N,y=b(W,V),A=F,x=L,z=T,k=W,I=0,S=0;for(Z&&(A=z=p),Z&&(x=z=p),N=new Array(W),W=0,_=k>1?R(_,G):b(G,V),k&&(d=(c=g[0]).key);i>S&&!((h=r(n[S]))>=h);)++S;for(;i>S;){for(c&&h>=d?(v=c,m=d,y[I]=W,(c=g[++I])&&(d=c.key)):(v={key:h,value:z()},m=h),N[W]=v;!(h>m||(_[a=e[S]+t]=W,v.value=A(v.value,O[a],!0),w.zeroExcept(a,J,H)||(v.value=x(v.value,O[a],!1)),++S>=i));)h=r(n[S]);o()}for(;k>I;)N[y[I]=W]=g[I++],o();if(W>I)for(I=0;t>I;++I)_[I]=y[_[I]];a=M.indexOf(X),W>1?(X=u,Y=s):(!W&&nr&&(W=1,N=[{key:null,value:z()}]),1===W?(X=f,Y=l):(X=p,Y=p),_=null),M[a]=X}function t(){if(W>1){for(var r=W,n=N,e=b(r,r),t=0,i=0;G>t;++t)w.zero(t)||(e[_[i]=_[t]]=1,++i);for(N=[],W=0,t=0;r>t;++t)e[t]&&(e[t]=W++,N.push(n[t]));if(W>1)for(var t=0;i>t;++t)_[t]=e[_[t]];else _=null;M[M.indexOf(X)]=W>1?(Y=s,X=u):1===W?(Y=l,X=f):Y=X=p}else if(1===W){if(nr)return;for(var t=0;G>t;++t)if(!w.zero(t))return;N=[],W=0,M[M.indexOf(X)]=X=Y=p}}function u(r,n,e,t,i){if(!(r===B&&n===J||Z)){var o,u,f,s;for(o=0,f=e.length;f>o;++o)w.zeroExcept(u=e[o],J,H)&&(s=N[_[u]],s.value=F(s.value,O[u]));for(o=0,f=t.length;f>o;++o)w.onlyExcept(u=t[o],J,H,n,r)&&(s=N[_[u]],s.value=L(s.value,O[u],i))}}function f(r,n,e,t,i){if(!(r===B&&n===J||Z)){var o,u,f,s=N[0];for(o=0,f=e.length;f>o;++o)w.zeroExcept(u=e[o],J,H)&&(s.value=F(s.value,O[u]));for(o=0,f=t.length;f>o;++o)w.onlyExcept(u=t[o],J,H,n,r)&&(s.value=L(s.value,O[u],i))}}function s(){var r,n;for(r=0;W>r;++r)N[r].value=T();for(r=0;G>r;++r)n=N[_[r]],n.value=F(n.value,O[r],!0);for(r=0;G>r;++r)w.zeroExcept(r,J,H)||(n=N[_[r]],n.value=L(n.value,O[r],!1))}function l(){var r,n=N[0];for(n.value=T(),r=0;G>r;++r)n.value=F(n.value,O[r],!0);for(r=0;G>r;++r)w.zeroExcept(r,J,H)||(n.value=L(n.value,O[r],!1))}function a(){return Z&&(Y(),Z=!1),N}function c(r){var n=j(a(),0,N.length,r);return D.sort(n,0,n.length)}function d(r,n,e){return F=r,L=n,T=e,Z=!0,q}function h(){return d(g,y,m)}function v(r){return d(A(r),x(r),m)}function z(r){function n(n){return r(n.value)}return j=o(n),D=i(n),q}function k(){return z(n)}function I(){return W}function S(){var r=M.indexOf(X);return r>=0&&M.splice(r,1),r=$.indexOf(e),r>=0&&$.splice(r,1),r=U.indexOf(t),r>=0&&U.splice(r,1),q}var q={top:c,all:a,reduce:d,reduceCount:h,reduceSum:v,order:z,orderNatural:k,size:I,dispose:S,remove:S};rr.push(q);var N,_,j,D,F,L,T,Q=8,V=E(Q),W=0,X=p,Y=p,Z=!0,nr=r===p;return arguments.length<1&&(r=n),M.push(X),$.push(e),U.push(t),e(K,P,0,G),h().orderNatural()}function L(){var r=F(p),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function T(){rr.forEach(function(r){r.dispose()});var r=S.indexOf(t);return r>=0&&S.splice(r,1),r=S.indexOf(u),r>=0&&S.splice(r,1),r=U.indexOf(s),r>=0&&U.splice(r,1),w.masks[J]&=H,q()}var B,H,J,K,P,Q,V,W,X={filter:a,filterExact:c,filterRange:I,filterFunction:N,filterAll:q,top:j,bottom:D,group:F,groupAll:L,dispose:T,remove:T},Y=f(function(r){return Q[r]}),Z=v,$=[],rr=[],nr=0,er=0;S.unshift(t),S.push(u),U.push(s);var tr=w.add();return J=tr.offset,B=tr.one,H=~B,t(O,0,G),u(O,0,G),X}function s(){function r(r,n){var e;if(!h)for(e=n;G>e;++e)s=l(s,O[e],!0),w.zero(e)||(s=a(s,O[e],!1))}function n(r,n,e,t,i){var o,u,f;if(!h){for(o=0,f=e.length;f>o;++o)w.zero(u=e[o])&&(s=l(s,O[u],i));for(o=0,f=t.length;f>o;++o)w.only(u=t[o],n,r)&&(s=a(s,O[u],i))}}function e(){var r;for(s=c(),r=0;G>r;++r)s=l(s,O[r],!0),w.zero(r)||(s=a(s,O[r],!1))}function t(r,n,e){return l=r,a=n,c=e,h=!0,d}function i(){return t(g,y,m)}function o(r){return t(A(r),x(r),m)}function u(){return h&&(e(),h=!1),s}function f(){var e=M.indexOf(n);return e>=0&&M.splice(e),e=S.indexOf(r),e>=0&&S.splice(e),d}var s,l,a,c,d={reduce:t,reduceCount:i,reduceSum:o,value:u,dispose:f,remove:f},h=!0;return M.push(n),S.push(r),r(O,0,G),i()}function l(){return G}function a(){return O}var w,I={add:r,remove:t,dimension:u,groupAll:s,size:l,all:a},O=[],G=0,M=[],S=[],U=[];return w=new c(0),arguments.length?r(arguments[0]):I}function b(r,n){return(257>n?U:65537>n?q:N)(r)}function z(r){for(var n=b(r,r),e=-1;++e<r;)n[e]=e;return n}function E(r){return 8===r?256:16===r?65536:4294967296}w.version="2.0.0-alpha.03",w.permute=e;var k=w.bisect=t(n);k.by=t;var I=w.heap=i(n);I.by=i;var O=w.heapselect=o(n);O.by=o;var G=w.insertionsort=u(n);G.by=u;var M=w.quicksort=f(n);M.by=f;var S=32,U=s,q=s,N=s,R=l,C=a;"undefined"!=typeof Uint8Array&&(U=function(r){return new Uint8Array(r)},q=function(r){return new Uint16Array(r)},N=function(r){return new Uint32Array(r)},R=function(r,n){if(r.length>=n)return r;var e=new r.constructor(n);return e.set(r),e},C=function(r,n){var e;switch(n){case 16:e=q(r.length);break;case 32:e=N(r.length);break;default:throw new Error("invalid array width!")}return e.set(r),e}),c.prototype.lengthen=function(r){var n,e;for(n=0,e=this.subarrays;e>n;++n)this[n]=R(this[n],r);this.length=r},c.prototype.add=function(){var r,n,e,t,i;for(t=0,i=this.subarrays;i>t;++t)if(r=this.masks[t],n=this.width-32*t,e=~r&-~r,!(n>=32)||e)return 32>n&&e&1<<n&&(this[t]=C(this[t],n<<=1),this.width=32*t+n),this.masks[t]|=e,{offset:t,one:e};return this[this.subarrays]=U(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},c.prototype.copy=function(r,n){var e,t;for(e=0,t=this.subarrays;t>e;++e)this[e][r]=this[e][n]},c.prototype.truncate=function(r){var n,e;for(n=0,e=this.subarrays;e>n;++n){for(var t=this.length-1;t>=r;t--)this[n][t]=0;this[n].length=r}this.length=r},c.prototype.zero=function(r){var n,e;for(n=0,e=this.subarrays;e>n;++n)if(this[n][r])return!1;return!0},c.prototype.zeroExcept=function(r,n,e){var t,i;for(t=0,i=this.subarrays;i>t;++t)if(t===n?this[t][r]&e:this[t][r])return!1;return!0},c.prototype.only=function(r,n,e){var t,i;for(t=0,i=this.subarrays;i>t;++t)if(this[t][r]!=(t===n?e:0))return!1;return!0},c.prototype.onlyExcept=function(r,n,e,t,i){var o,u,f;for(u=0,f=this.subarrays;f>u;++u)if(o=this[u][r],u===n&&(o&=e),o!=(u===t?i:0))return!1;return!0},r.crossfilter=w}("undefined"!=typeof e&&e||this)},{}],2:[function(r,n,e){n.exports=r("./crossfilter").crossfilter},{"./crossfilter":1}],3:[function(r,n,e){(function(e){var t="undefined"!=typeof window?window.operative:"undefined"!=typeof e?e.operative:null,i=r("crossfilter2"),o=t({crossfilters:{},crossfilterIndex:0,dimensions:{},dimensionIndex:0,groupAlls:{},groupAllIndex:0,dimensionGroupAlls:{},dimensionGroupAllIndex:0,"new":function(r){this.crossfilters[this.crossfilterIndex]=i(r);var n=this.crossfilterIndex;this.crossfilterIndex++,this.deferred().fulfill(n)},dimension:function(r){this.dimensions[this.dimensionIndex]=this.crossfilter.dimension(r);var n=this.dimensionIndex;this.dimensionIndex++,this.deferred().fulfill(n)},"dimension.dispose":function(r){this.dimensions[r].dispose(),this.deferred().fulfill()},"dimension.groupAll":function(r){this.dimensionGroupAlls[this.dimensionGroupAllIndex]=this.dimensions[r].groupAll();var n=this.dimensionGroupAllIndex;this.dimensionGroupAllIndex++,this.deferred().fulfill(n)},"dimension.groupAll.value":function(r){var n=this.dimensionGroupAlls[r].value();this.deferred().fulfill(n)},"dimension.groupAll.reduceSum":function(r,n){this.dimensionGroupAlls[r].reduceSum(n),this.deferred().fulfill()},"dimension.groupAll.reduce":function(r,n,e,t){this.dimensionGroupAlls[r].reduce(n,e,t),this.deferred().fulfill()},"dimension.filterRange":function(r,n){this.dimensions[r].filterRange(n),this.deferred().fulfill()},"dimension.filterAll":function(r){this.dimensions[r].filterAll(),this.deferred().fulfill()},"dimension.filter":function(r,n){this.dimensions[r].filter(n),this.deferred().fulfill()},groupAll:function(r){this.groupAlls[this.groupAllIndex]=this.crossfilters[r].groupAll();var n=this.groupAllIndex;this.groupAllIndex++,this.deferred().fulfill(n)},"groupAll.value":function(r){var n=this.groupAlls[r].value();this.deferred().fulfill(n)},add:function(r,n){this.crossfilters[r].add(n),this.deferred().fulfill()},size:function(r){var n=this.crossfilters[r].size();this.deferred().fulfill(n)}},["./node_modules/crossfilter2/crossfilter.min.js"]),u=function(r){var n=o["new"](r);return{dimension:function(r){var n=o.dimension(r);return{dispose:function(){return o["dimension.dispose"](n)},groupAll:function(){var r=o["dimension.groupAll"](n);return{value:function(){return o["dimension.groupAll.value"](r)},reduceSum:function(n){return o["dimension.groupAll.reduceSum"](r,n),this},reduce:function(n,e,t){return o["dimension.groupAll.reduce"](r,n,e,t),this}}},filterRange:function(r){return o["dimension.filterRange"](n,r)},filterAll:function(){return o["dimension.filterAll"](n)},filter:function(r){return o["dimension.filter"](n,r)}}},groupAll:function(){var r=o.groupAll(n);return{value:function(){return o["groupAll.value"](r)}}},remove:function(){},add:function(r){return o.add(n,r)},size:function(){return o.size(n)}}};u.bisect=i.bisect,u.heap=i.heap,n.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crossfilter2:2}]},{},[3])(3)});