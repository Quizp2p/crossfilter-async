!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.promisefilter=r()}}(function(){return function r(n,e,t){function i(u,f){if(!e[u]){if(!n[u]){var s="function"==typeof require&&require;if(!f&&s)return s(u,!0);if(o)return o(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var l=e[u]={exports:{}};n[u][0].call(l.exports,function(r){var e=n[u][1][r];return i(e?e:r)},l,l.exports,r,n,e,t)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<t.length;u++)i(t[u]);return i}({1:[function(r,n,e){!function(r){function n(r){return r}function e(r,n){for(var e=0,t=n.length,i=new Array(t);t>e;++e)i[e]=r[n[e]];return i}function t(r){function n(n,e,t,i){for(;i>t;){var o=t+i>>>1;r(n[o])<e?t=o+1:i=o}return t}function e(n,e,t,i){for(;i>t;){var o=t+i>>>1;e<r(n[o])?i=o:t=o+1}return t}return e.right=e,e.left=n,e}function i(r){function n(r,n,e){for(var i=e-n,o=(i>>>1)+1;--o>0;)t(r,o,i,n);return r}function e(r,n,e){for(var i,o=e-n;--o>0;)i=r[n],r[n]=r[n+o],r[n+o]=i,t(r,1,o,n);return r}function t(n,e,t,i){for(var o,u=n[--i+e],f=r(u);(o=e<<1)<=t&&(t>o&&r(n[i+o])>r(n[i+o+1])&&o++,!(f<=r(n[i+o])));)n[i+e]=n[i+o],e=o;n[i+e]=u}return n.sort=e,n}function o(r){function n(n,t,i,o){var u,f,s,a,l=new Array(o=Math.min(i-t,o));for(f=0;o>f;++f)l[f]=n[t++];if(e(l,0,o),i>t){u=r(l[0]);do(s=r(a=n[t])>u)&&(l[0]=a,u=r(e(l,0,o)[0]));while(++t<i)}return l}var e=i(r);return n}function u(r){function n(n,e,t){for(var i=e+1;t>i;++i){for(var o=i,u=n[i],f=r(u);o>e&&r(n[o-1])>f;--o)n[o]=n[o-1];n[o]=u}return n}return n}function f(r){function n(r,n,i){return(q>i-n?t:e)(r,n,i)}function e(e,t,i){var o,u=(i-t)/6|0,f=t+u,s=i-1-u,a=t+i-1>>1,l=a-u,c=a+u,h=e[f],v=r(h),d=e[l],p=r(d),y=e[a],g=r(y),m=e[c],x=r(m),w=e[s],b=r(w);v>p&&(o=h,h=d,d=o,o=v,v=p,p=o),x>b&&(o=m,m=w,w=o,o=x,x=b,b=o),v>g&&(o=h,h=y,y=o,o=v,v=g,g=o),p>g&&(o=d,d=y,y=o,o=p,p=g,g=o),v>x&&(o=h,h=m,m=o,o=v,v=x,x=o),g>x&&(o=y,y=m,m=o,o=g,g=x,x=o),p>b&&(o=d,d=w,w=o,o=p,p=b,b=o),p>g&&(o=d,d=y,y=o,o=p,p=g,g=o),x>b&&(o=m,m=w,w=o,o=x,x=b,b=o);var A=d,E=p,z=m,k=x;e[f]=h,e[l]=e[t],e[a]=y,e[c]=e[i-1],e[s]=w;var O=t+1,I=i-2,M=k>=E&&E>=k;if(M)for(var U=O;I>=U;++U){var q=e[U],N=r(q);if(E>N)U!==O&&(e[U]=e[O],e[O]=q),++O;else if(N>E)for(;;){var C=r(e[I]);{if(!(C>E)){if(E>C){e[U]=e[O],e[O++]=e[I],e[I--]=q;break}e[U]=e[I],e[I--]=q;break}I--}}}else for(var U=O;I>=U;U++){var q=e[U],N=r(q);if(E>N)U!==O&&(e[U]=e[O],e[O]=q),++O;else if(N>k)for(;;){var C=r(e[I]);{if(!(C>k)){E>C?(e[U]=e[O],e[O++]=e[I],e[I--]=q):(e[U]=e[I],e[I--]=q);break}if(I--,U>I)break}}}if(e[t]=e[O-1],e[O-1]=A,e[i-1]=e[I+1],e[I+1]=z,n(e,t,O-1),n(e,I+2,i),M)return e;if(f>O&&I>s){for(var _,C;(_=r(e[O]))<=E&&_>=E;)++O;for(;(C=r(e[I]))<=k&&C>=k;)--I;for(var U=O;I>=U;U++){var q=e[U],N=r(q);if(E>=N&&N>=E)U!==O&&(e[U]=e[O],e[O]=q),O++;else if(k>=N&&N>=k)for(;;){var C=r(e[I]);{if(!(k>=C&&C>=k)){E>C?(e[U]=e[O],e[O++]=e[I],e[I--]=q):(e[U]=e[I],e[I--]=q);break}if(I--,U>I)break}}}}return n(e,O,I+1)}var t=u(r);return n}function s(r){for(var n=new Array(r),e=-1;++e<r;)n[e]=0;return n}function a(r,n){for(var e=r.length;n>e;)r[e++]=0;return r}function l(r,n){if(n>32)throw new Error("invalid array width!");return r}function c(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=N(r)}function h(r,n){return function(e){var t=e.length;return[r.left(e,n,0,t),r.right(e,n,0,t)]}}function v(r,n){var e=n[0],t=n[1];return function(n){var i=n.length;return[r.left(n,e,0,i),r.left(n,t,0,i)]}}function d(r){return[0,r.length]}function p(){return null}function y(){return 0}function g(r){return r+1}function m(r){return r-1}function x(r){return function(n,e){return n+ +r(e)}}function w(r){return function(n,e){return n-r(e)}}function b(){function r(r){var n=M,e=r.length;return e&&(I=I.concat(r),b.lengthen(M+=e),q.forEach(function(t){t(r,n,e)})),O}function t(){for(var r=A(M,M),n=[],e=0,t=0;M>e;++e)b.zero(e)?n.push(e):r[e]=t++;U.forEach(function(r){r(-1,-1,[],n,!0)}),N.forEach(function(n){n(r)});for(var e=0,t=0;M>e;++e)b.zero(e)||(e!==t&&(b.copy(t,e),I[t]=I[e]),++t);I.length=M=t,b.truncate(t)}function u(r){function t(n,t,i){Q=n.map(r),V=Y(E(i),0,i),Q=e(Q,V);var o,u=Z(Q),f=u[0],s=u[1];if(W)for(o=0;i>o;++o)W(Q[o],o)||(b[J][V[o]+t]|=G);else{for(o=0;f>o;++o)b[J][V[o]+t]|=G;for(o=s;i>o;++o)b[J][V[o]+t]|=G}if(!t)return K=Q,P=V,nr=f,void(er=s);var a=K,l=P,c=0,h=0;for(K=new Array(M),P=A(M,M),o=0;t>c&&i>h;++o)a[c]<Q[h]?(K[o]=a[c],P[o]=l[c++]):(K[o]=Q[h],P[o]=V[h++]+t);for(;t>c;++c,++o)K[o]=a[c],P[o]=l[c];for(;i>h;++h,++o)K[o]=Q[h],P[o]=V[h]+t;u=Z(K),nr=u[0],er=u[1]}function u(r,n,e){$.forEach(function(r){r(Q,V,n,e)}),Q=V=null}function s(r){for(var n,e=0,t=0;M>e;++e)b.zero(n=P[e])||(e!==t&&(K[t]=K[e]),P[t]=r[n],++t);for(K.length=t;M>t;)P[t++]=0;var i=Z(K);nr=i[0],er=i[1]}function a(r){var n=r[0],e=r[1];if(W)return W=null,F(function(r,t){return t>=n&&e>t}),nr=n,er=e,X;var t,i,o,u=[],f=[];if(nr>n)for(t=n,i=Math.min(nr,e);i>t;++t)b[J][o=P[t]]^=G,u.push(o);else if(n>nr)for(t=nr,i=Math.min(n,er);i>t;++t)b[J][o=P[t]]^=G,f.push(o);if(e>er)for(t=Math.max(n,er),i=e;i>t;++t)b[J][o=P[t]]^=G,u.push(o);else if(er>e)for(t=Math.max(nr,e),i=er;i>t;++t)b[J][o=P[t]]^=G,f.push(o);return nr=n,er=e,U.forEach(function(r){r(G,J,u,f)}),X}function l(r){return null==r?C():Array.isArray(r)?O(r):"function"==typeof r?_(r):c(r)}function c(r){return a((Z=h(k,r))(K))}function O(r){return a((Z=v(k,r))(K))}function C(){return a((Z=d)(K))}function _(r){return Z=d,F(W=r),nr=0,er=M,X}function F(r){var n,e,t,i=[],o=[];for(n=0;M>n;++n)!(b[J][e=P[n]]&G)^!!(t=r(K[n],n))&&(t?(b[J][e]&=H,i.push(e)):(b[J][e]|=G,o.push(e)));U.forEach(function(r){r(G,J,i,o)})}function S(r){for(var n,e=[],t=er;--t>=nr&&r>0;)b.zero(n=P[t])&&(e.push(I[n]),--r);return e}function L(r){for(var n,e=[],t=nr;er>t&&r>0;)b.zero(n=P[t])&&(e.push(I[n]),--r),t++;return e}function R(r){function e(n,e,t,i){function o(){++W===V&&(m=D(m,Q<<=1),F=D(F,Q),V=z(Q))}var l,c,h,v,d,y,g=_,m=A(W,V),x=R,w=T,E=B,k=W,O=0,q=0;for(Z&&(x=E=p),Z&&(w=E=p),_=new Array(W),W=0,F=k>1?j(F,M):A(M,V),k&&(h=(c=g[0]).key);i>q&&!((v=r(n[q]))>=v);)++q;for(;i>q;){for(c&&v>=h?(d=c,y=h,m[O]=W,(c=g[++O])&&(h=c.key)):(d={key:v,value:E()},y=v),_[W]=d;!(v>y||(F[l=e[q]+t]=W,d.value=x(d.value,I[l],!0),b.zeroExcept(l,J,H)||(d.value=w(d.value,I[l],!1)),++q>=i));)v=r(n[q]);o()}for(;k>O;)_[m[O]=W]=g[O++],o();if(W>O)for(O=0;t>O;++O)F[O]=m[F[O]];l=U.indexOf(X),W>1?(X=u,Y=s):(!W&&nr&&(W=1,_=[{key:null,value:E()}]),1===W?(X=f,Y=a):(X=p,Y=p),F=null),U[l]=X}function t(){if(W>1){for(var r=W,n=_,e=A(r,r),t=0,i=0;M>t;++t)b.zero(t)||(e[F[i]=F[t]]=1,++i);for(_=[],W=0,t=0;r>t;++t)e[t]&&(e[t]=W++,_.push(n[t]));if(W>1)for(var t=0;i>t;++t)F[t]=e[F[t]];else F=null;U[U.indexOf(X)]=W>1?(Y=s,X=u):1===W?(Y=a,X=f):Y=X=p}else if(1===W){if(nr)return;for(var t=0;M>t;++t)if(!b.zero(t))return;_=[],W=0,U[U.indexOf(X)]=X=Y=p}}function u(r,n,e,t,i){if(!(r===G&&n===J||Z)){var o,u,f,s;for(o=0,f=e.length;f>o;++o)b.zeroExcept(u=e[o],J,H)&&(s=_[F[u]],s.value=R(s.value,I[u]));for(o=0,f=t.length;f>o;++o)b.onlyExcept(u=t[o],J,H,n,r)&&(s=_[F[u]],s.value=T(s.value,I[u],i))}}function f(r,n,e,t,i){if(!(r===G&&n===J||Z)){var o,u,f,s=_[0];for(o=0,f=e.length;f>o;++o)b.zeroExcept(u=e[o],J,H)&&(s.value=R(s.value,I[u]));for(o=0,f=t.length;f>o;++o)b.onlyExcept(u=t[o],J,H,n,r)&&(s.value=T(s.value,I[u],i))}}function s(){var r,n;for(r=0;W>r;++r)_[r].value=B();for(r=0;M>r;++r)n=_[F[r]],n.value=R(n.value,I[r],!0);for(r=0;M>r;++r)b.zeroExcept(r,J,H)||(n=_[F[r]],n.value=T(n.value,I[r],!1))}function a(){var r,n=_[0];for(n.value=B(),r=0;M>r;++r)n.value=R(n.value,I[r],!0);for(r=0;M>r;++r)b.zeroExcept(r,J,H)||(n.value=T(n.value,I[r],!1))}function l(){return Z&&(Y(),Z=!1),_}function c(r){var n=S(l(),0,_.length,r);return L.sort(n,0,n.length)}function h(r,n,e){return R=r,T=n,B=e,Z=!0,C}function v(){return h(g,m,y)}function d(r){return h(x(r),w(r),y)}function E(r){function n(n){return r(n.value)}return S=o(n),L=i(n),C}function k(){return E(n)}function O(){return W}function q(){var r=U.indexOf(X);return r>=0&&U.splice(r,1),r=$.indexOf(e),r>=0&&$.splice(r,1),r=N.indexOf(t),r>=0&&N.splice(r,1),C}var C={top:c,all:l,reduce:h,reduceCount:v,reduceSum:d,order:E,orderNatural:k,size:O,dispose:q,remove:q};rr.push(C);var _,F,S,L,R,T,B,Q=8,V=z(Q),W=0,X=p,Y=p,Z=!0,nr=r===p;return arguments.length<1&&(r=n),U.push(X),$.push(e),N.push(t),e(K,P,0,M),v().orderNatural()}function T(){var r=R(p),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function B(){rr.forEach(function(r){r.dispose()});var r=q.indexOf(t);return r>=0&&q.splice(r,1),r=q.indexOf(u),r>=0&&q.splice(r,1),r=N.indexOf(s),r>=0&&N.splice(r,1),b.masks[J]&=H,C()}var G,H,J,K,P,Q,V,W,X={filter:l,filterExact:c,filterRange:O,filterFunction:_,filterAll:C,top:S,bottom:L,group:R,groupAll:T,dispose:B,remove:B},Y=f(function(r){return Q[r]}),Z=d,$=[],rr=[],nr=0,er=0;q.unshift(t),q.push(u),N.push(s);var tr=b.add();return J=tr.offset,G=tr.one,H=~G,t(I,0,M),u(I,0,M),X}function s(){function r(r,n){var e;if(!v)for(e=n;M>e;++e)s=a(s,I[e],!0),b.zero(e)||(s=l(s,I[e],!1))}function n(r,n,e,t,i){var o,u,f;if(!v){for(o=0,f=e.length;f>o;++o)b.zero(u=e[o])&&(s=a(s,I[u],i));for(o=0,f=t.length;f>o;++o)b.only(u=t[o],n,r)&&(s=l(s,I[u],i))}}function e(){var r;for(s=c(),r=0;M>r;++r)s=a(s,I[r],!0),b.zero(r)||(s=l(s,I[r],!1))}function t(r,n,e){return a=r,l=n,c=e,v=!0,h}function i(){return t(g,m,y)}function o(r){return t(x(r),w(r),y)}function u(){return v&&(e(),v=!1),s}function f(){var e=U.indexOf(n);return e>=0&&U.splice(e),e=q.indexOf(r),e>=0&&q.splice(e),h}var s,a,l,c,h={reduce:t,reduceCount:i,reduceSum:o,value:u,dispose:f,remove:f},v=!0;return U.push(n),q.push(r),r(I,0,M),i()}function a(){return M}function l(){return I}var b,O={add:r,remove:t,dimension:u,groupAll:s,size:a,all:l},I=[],M=0,U=[],q=[],N=[];return b=new c(0),arguments.length?r(arguments[0]):O}function A(r,n){return(257>n?N:65537>n?C:_)(r)}function E(r){for(var n=A(r,r),e=-1;++e<r;)n[e]=e;return n}function z(r){return 8===r?256:16===r?65536:4294967296}b.version="2.0.0-alpha.03",b.permute=e;var k=b.bisect=t(n);k.by=t;var O=b.heap=i(n);O.by=i;var I=b.heapselect=o(n);I.by=o;var M=b.insertionsort=u(n);M.by=u;var U=b.quicksort=f(n);U.by=f;var q=32,N=s,C=s,_=s,j=a,D=l;"undefined"!=typeof Uint8Array&&(N=function(r){return new Uint8Array(r)},C=function(r){return new Uint16Array(r)},_=function(r){return new Uint32Array(r)},j=function(r,n){if(r.length>=n)return r;var e=new r.constructor(n);return e.set(r),e},D=function(r,n){var e;switch(n){case 16:e=C(r.length);break;case 32:e=_(r.length);break;default:throw new Error("invalid array width!")}return e.set(r),e}),c.prototype.lengthen=function(r){var n,e;for(n=0,e=this.subarrays;e>n;++n)this[n]=j(this[n],r);this.length=r},c.prototype.add=function(){var r,n,e,t,i;for(t=0,i=this.subarrays;i>t;++t)if(r=this.masks[t],n=this.width-32*t,e=~r&-~r,!(n>=32)||e)return 32>n&&e&1<<n&&(this[t]=D(this[t],n<<=1),this.width=32*t+n),this.masks[t]|=e,{offset:t,one:e};return this[this.subarrays]=N(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},c.prototype.copy=function(r,n){var e,t;for(e=0,t=this.subarrays;t>e;++e)this[e][r]=this[e][n]},c.prototype.truncate=function(r){var n,e;for(n=0,e=this.subarrays;e>n;++n){for(var t=this.length-1;t>=r;t--)this[n][t]=0;this[n].length=r}this.length=r},c.prototype.zero=function(r){var n,e;for(n=0,e=this.subarrays;e>n;++n)if(this[n][r])return!1;return!0},c.prototype.zeroExcept=function(r,n,e){var t,i;for(t=0,i=this.subarrays;i>t;++t)if(t===n?this[t][r]&e:this[t][r])return!1;return!0},c.prototype.only=function(r,n,e){var t,i;for(t=0,i=this.subarrays;i>t;++t)if(this[t][r]!=(t===n?e:0))return!1;return!0},c.prototype.onlyExcept=function(r,n,e,t,i){var o,u,f;for(u=0,f=this.subarrays;f>u;++u)if(o=this[u][r],u===n&&(o&=e),o!=(u===t?i:0))return!1;return!0},r.crossfilter=b}("undefined"!=typeof e&&e||this)},{}],2:[function(r,n,e){n.exports=r("./crossfilter").crossfilter},{"./crossfilter":1}],3:[function(r,n,e){(function(e){var t="undefined"!=typeof window?window.operative:"undefined"!=typeof e?e.operative:null,i=r("crossfilter2"),o=t({crossfilters:{},crossfilterIndex:0,dimensions:{},dimensionIndex:0,groupAlls:{},groupAllIndex:0,"new":function(r){this.crossfilters[this.crossfilterIndex]=i(r);var n=this.crossfilterIndex;this.crossfilterIndex++,this.deferred().fulfill(n)},dimension:function(r){this.dimensions[this.dimensionIndex]=this.crossfilter.dimension(r);var n=this.dimensionIndex;this.dimensionIndex++,this.deferred().fulfill(n)},"dimension.dispose":function(r){this.dimensions[r].dispose(),this.deferred().fulfill()},groupAll:function(r){this.groupAlls[this.groupAllIndex]=this.crossfilters[r].groupAll();var n=this.groupAllIndex;this.groupAllIndex++,this.deferred().fulfill(n)},"groupAll.value":function(r){var n=this.groupAlls[r].value();this.deferred().fulfill(n)},add:function(r,n){this.crossfilters[r].add(n),this.deferred().fulfill()}},["./node_modules/crossfilter2/crossfilter.min.js"]),u=function(r){var n=o["new"](r);return{dimension:function(r){var n=o.dimension(r);return{dispose:function(){o["dimension.dispose"](n)}}},groupAll:function(){var r=o.groupAll(n);return{value:function(){return o["groupAll.value"](r)}}},remove:function(){},add:function(r){return o.add(n,r)}}};u.bisect=i.bisect,u.heap=i.heap,n.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crossfilter2:2}]},{},[3])(3)});